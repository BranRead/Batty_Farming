[gd_scene load_steps=11 format=2]

[ext_resource path="res://images/02_PixelSky_1920x1080.png" type="Texture" id=1]
[ext_resource path="res://LeftScreen.gd" type="Script" id=2]
[ext_resource path="res://RightScreen.gd" type="Script" id=3]
[ext_resource path="res://TopScreen.gd" type="Script" id=4]
[ext_resource path="res://BottomScreen.gd" type="Script" id=5]
[ext_resource path="res://Mouse.gd" type="Script" id=6]

[sub_resource type="GDScript" id=1]
script/source = "extends Node
var food_packed_scene = preload(\"Food.tscn\")
var bat_packed_scene = preload(\"Bat.tscn\")
var rng = RandomNumberGenerator.new()
var guano_collected : int = 0
var is_mouse_touching_something : bool = false 

# Called when the node enters the scene tree for the first time.
func _ready():
	rng.randomize()
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	if Input.is_action_just_pressed(\"click\") && !is_mouse_touching_something:
		var mouse_position = get_viewport().get_mouse_position()
		var food = food_packed_scene.instance()
		food.position = mouse_position
		add_child(food)
		
	if Input.is_action_just_pressed(\"right_click\"):
		var mouse_position = get_viewport().get_mouse_position()
		var bat = bat_packed_scene.instance()
		#This is the most important part 
		#Otherwise the bats all share the same script
		var batDouble = bat.duplicate()
		batDouble.position = mouse_position
		add_child(batDouble)


func _on_Mouse_area_entered(area):
	#print(\"Can't drop food\")
	is_mouse_touching_something = true


func _on_Mouse_area_exited(area):
	#print(\"Can drop food\")
	is_mouse_touching_something = false
"

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 41.5, 484.25 )

[sub_resource type="RectangleShape2D" id=3]
extents = Vector2( 883.75, 50.875 )

[sub_resource type="CircleShape2D" id=4]

[node name="Main" type="Node"]
script = SubResource( 1 )

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = -1

[node name="Sprite" type="Sprite" parent="CanvasLayer"]
position = Vector2( 960, 490 )
scale = Vector2( 0.9, 0.9 )
z_index = -1
texture = ExtResource( 1 )

[node name="LeftScreen" type="Area2D" parent="CanvasLayer"]
script = ExtResource( 2 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/LeftScreen"]
position = Vector2( 84, 490.5 )
shape = SubResource( 2 )

[node name="RightScreen" type="Area2D" parent="CanvasLayer"]
script = ExtResource( 3 )

[node name="CollisionShape2D2" type="CollisionShape2D" parent="CanvasLayer/RightScreen"]
position = Vector2( 1826.5, 488 )
shape = SubResource( 2 )

[node name="TopScreen" type="Area2D" parent="CanvasLayer"]
position = Vector2( 694, -137 )
script = ExtResource( 4 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/TopScreen"]
position = Vector2( 262.75, 125.25 )
shape = SubResource( 3 )

[node name="BottomScreen" type="Area2D" parent="CanvasLayer"]
position = Vector2( 1388, -274 )
script = ExtResource( 5 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/BottomScreen"]
position = Vector2( -427, 1223.88 )
shape = SubResource( 3 )

[node name="Mouse" type="Area2D" parent="."]
script = ExtResource( 6 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Mouse"]
scale = Vector2( 0.5, 0.5 )
shape = SubResource( 4 )

[connection signal="area_entered" from="Mouse" to="." method="_on_Mouse_area_entered"]
[connection signal="area_exited" from="Mouse" to="." method="_on_Mouse_area_exited"]
